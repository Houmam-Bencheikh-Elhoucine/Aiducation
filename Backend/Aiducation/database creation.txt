create database if not exists AIDUCATION_DATA
-- pictures are stored in the following way "./pictures/profile/<str: imagename>"
-- in database AIDUCATION_DATA

create table if not exists USERS(
	idUser integer auto increment, 
	firstName varchar(255), 
	lastName varchar(255), 
	email varchar(1024), 
	phoneNumber varchar(10), 
	landlineNumber varchar(10), 
	password varchar(255), 
	profilePic varchar(1043) default("./pictures/profile/static.png") unique, 
	address integer, 
	primary key(idUser), 
	froeign key(address) references ADDRESS(idAddress)
);

create table if not exists ADDRESSES(
	idAdderss integer auto increment, state varchar(255), city varchar(255), 
	description varchar(1024), primary key(idAddress)
);

create table if not exists MODULES(
	idModule varchar(255), nomModule varchar(255), primary key(idModule)
);

-- photo path is stored in the following path "./pictures/post/<str: imagename>"
create table if not exists PHOTOS(
	idPhoto integer auto increment, 
	path varchar(1024) unique, 
	priority integer,
	announcement integer,
	primary key(idPhoto),
	foreign key(annoncement) references ANNOUNCEMENT(idAnnouncement)
);

create table if not exists CATEGORIES(
	idCategory integer auto increment,
	cycle varchar(100), 
	level varchar(100)
);

create table if not exists ANNOUNCEMENT(
	idAnnouncement integer auto increment,
	description varchar(2048);
	price integer check(price>0),
	
	primary key(iAnnouncement)
);

create table if not exists MESSAGES(
	message varchar(255),
	state integer check(state in (-1, 1)),
	reason varchar(255),
	dateSent datetime,
	dateResponse datetime, 
	sender integer, 
	receiver integer, 
	announcement integer, 
	primary key(sender, receievr, announcement),
	foreign key(sender) references USER(idUser), 
	foreign key(receiver) references USER(idUser), 
	foreign key(announcement) references USER(idAnnouncement)
);
